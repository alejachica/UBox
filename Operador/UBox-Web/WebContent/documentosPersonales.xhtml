<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/templates/template-prueba.xhtml">
	<ui:define name="bodyContent">
		<!--div class="row"-->
			<!--div class="box col-md-12"-->
				<!--div class="box-inner"-->
					<div class="box-header well" data-original-title="">
					    <h2><i class="glyphicon glyphicon-user"></i>Directorio documentos</h2>
					</div>
					<!--div class="box-content"-->
						<div class="alert alert-info">
						    <table class="table">
						        <tbody>
						            <tr>
						                <td>
						                    <p:commandLink onclick="PF('dialogoCrearCarpeta').show();" value="Crear Carpeta">
						            		</p:commandLink>
						                </td>
						            </tr>
						        </tbody>
						    </table>
						</div>
						<h:form id="formDirectorioId">
						    <p:treeTable value="#{directorioBean.root}" var="carpeta" id="directorio">
						        <f:facet name="header">
						            Directorio
						        </f:facet>
						        <p:column headerText="Nombre">
						            <h:outputText value="#{carpeta.nombre}" />
						        </p:column>
						        <p:column headerText="Descripcion">
						            <h:outputText value="#{carpeta.descripcion}" />
						        </p:column>
							    <p:column headerText="Acciones" rendered="#{carpeta.type eq 'Folder'}">
							    	<p:commandLink title="Cargar Documento" styleClass="ui-icon ui-icon-circle-arrow-n">
						            </p:commandLink>
							    	<p:commandLink title="Crear Sub-Carpeta" onclick="PF('dialogoCrearCarpeta').show();" styleClass="ui-icon ui-icon-plus">
						            </p:commandLink>
						            <p:commandLink update=":formDialog:dialogoElimCarpetaId" oncomplete="PF('dialogoElimCarpeta').show();" title="Eliminar Carpeta" styleClass="ui-icon ui-icon-trash">
						                <f:setPropertyActionListener value="#{carpeta.id}" target="#{directorioBean.carpetaId}"/>
						            </p:commandLink>
						        </p:column>
					        	<p:column headerText="Acciones" rendered="#{carpeta.type eq 'Archivo'}">
					        		<a  class="btn" href="#">
				                        <i class=" glyphicon glyphicon-ok"></i>Ver
				                    </a>
				                    <a  class="btn" href="#">
				                        <i class=" glyphicon glyphicon-ok"></i>Compartir
				                    </a>
					        		<a  class="btn" href="#">
				                        <i class=" glyphicon glyphicon-ok"></i>Eliminar
				                    </a>
				                    <!--h:form enctype="multipart/form-data"-->
									    <p:growl id="messages" showDetail="true" />
									    <p:fileUpload value="#{documentosPersonalesBean.file}" mode="simple" skinSimple="true"/>
									    <p:commandButton value="Submit" ajax="false" actionListener="#{documentosPersonalesBean.upload}" />
									<!--/h:form-->
					        	</p:column>
						        
						        <!--p:column style="width:24px">
						            <p:commandLink update=":form:documentPanel" oncomplete="PF('documentDialog').show()" title="View Detail" styleClass="ui-icon ui-icon-search">
						                <f:setPropertyActionListener value="#{document}" target="#{ttBasicView.selectedDocument}" />
						            </p:commandLink>
						        </p:column-->
						    </p:treeTable>
					 	</h:form>
					 	<h:form id="formDialog">
						 	<!-- Dialogo para crear una carpeta -->
						 	<p:dialog id="dialogoCrearCarpetaId" header="Crear Carpeta" showEffect="fade" widgetVar="dialogoCrearCarpeta" modal="true" resizable="false">
						 		<table>
						 			<tr>
						 				<td><h:outputText value="Nombre: "></h:outputText></td>
						 				<td><h:inputText value="#{directorioBean.nombre}"></h:inputText></td>
						 			</tr>
						 			<tr>
						 				<td><h:outputText  value="Descripcion: "></h:outputText></td>
						 				<td><h:inputText value="#{directorioBean.descripcion}"></h:inputText></td>
						 			</tr>
						 		</table>
								<br/>
						     	<h:commandButton action="#{directorioBean.crearCarpeta}" value="Crear Carpeta" update=":formDirectorioId:directorio">
								</h:commandButton>
						    </p:dialog>
						    <!-- Dialogo para eliminar una carpeta -->
						    <p:dialog id="dialogoElimCarpetaId" header="Eliminar Carpeta" showEffect="fade" widgetVar="dialogoElimCarpeta" modal="true" resizable="false">
						 		<td><h:outputText value="Esta seguro de eliminar esta carpeta?"></h:outputText></td>
								<br/>
								<table>
									<tr>
										<td><h:commandButton action="PF('dialogoElimCarpeta').hide();" value="NO"></h:commandButton></td>
										<td><h:commandButton action="#{directorioBean.eliminarCarpeta}" value="SI"></h:commandButton></td>
									</tr>
								</table>
						    </p:dialog>
					    </h:form>
					<!--/div-->
				<!--/div-->
			<!--/div-->
	    <!--/div-->
	</ui:define>
</ui:composition>